package client;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.Socket;

import org.omg.CORBA.PRIVATE_MEMBER;

public class Client extends Thread 
{
  private InetAddress ipAddress;
  private static DatagramSocket clientSocket;
  private ObjectOutputStream outputStream;
  private ObjectInputStream inputStream;
  
  public Client(String ipAddress) throws IOException
  {
    System.out.println("CLient: Attempting connecting....");
    clientSocket = new DatagramSocket();
    this.ipAddress = InetAddress.getByName(ipAddress);
    System.out.println("Client Connected!");
    setupStreams(clientSocket);
    while(true)
    {
      Object o;
      try
      {
        outputStream.writeObject("Client has connected the server!");
        o = inputStream.readObject();
        System.out.println((String)o);
      }
      catch( ClassNotFoundException e )
      {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
    }
  }
  
  public static void main(String[] args)
  {
    try
    {
      new Client();
    }
    catch( IOException e )
    {
      // TODO: handle exception
    }
  }
  
  public void setupStreams(Socket s) throws IOException
  {
    outputStream = new ObjectOutputStream(s.getOutputStream());
    inputStream = new ObjectInputStream(s.getInputStream());
  }
}
