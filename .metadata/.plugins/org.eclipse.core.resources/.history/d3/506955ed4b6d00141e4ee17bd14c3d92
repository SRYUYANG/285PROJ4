package main;

import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class Server
{
  private static ServerSocket serverSocket;
  private static Socket clientSocket;
  private static boolean serverRunning = false;

  private ObjectOutputStream outputStream;
  private ObjectInputStream inputStream;
  
  public Server()
  {
    
  }
  
  public void startServer()
  {
    try
    {
      System.out.println("Server: Starting....");
      serverSocket = new ServerSocket(Settings.SERVER_PORT);
      System.out.println("Connection successful");
      serverRunning = true;
      
      while(serverRunning)
      {
        clientSocket = serverSocket.accept();
        System.out.println("Server: Client connected from: " + clientSocket.getInetAddress().getHostAddress());
        setupStreams(clientSocket);
        outputStream.writeObject("Server: Welcome to server!");
      }
    }
    catch( IOException e )
    {
      e.printStackTrace();
      System.out.println("Error");
      System.exit(7);
    }
    
  }
  
  public void setupStreams(Socket s) throws IOException
  {
    outputStream = new ObjectOutputStream(s.getOutputStream());
    inputStream = new ObjectInputStream(s.getInputStream());
  }
}
